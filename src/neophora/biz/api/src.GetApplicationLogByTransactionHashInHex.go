package api

import (
	"neophora/lib/type/h256"
	"neophora/var/stderr"
)

// GetApplicationLogByTransactionHashBlockHeightInHex ...
// as an example:
//
// ```
// $ curl https://example.neophora.io -d '{"jsonrpc": "2.0","id": 1,"method": "GetApplicationLogByTransactionHashInHex","params":{"TransactionHash":"769bdbc97a875e0403668fb6feabf007d6728b9086d9a65344c11d6023eb870b"}}'
// {"id":1,"result":"7b2274786964223a22307830623837656232333630316463313434353361366439383639303862373264363037663061626665623638663636303330343565383737616339646239623736222c22657865637574696f6e73223a5b7b2274726967676572223a224170706c69636174696f6e222c22636f6e7472616374223a22307836343738336664316664343337313135643332383738383664383837373335616232663931376534222c22766d7374617465223a2248414c54222c226761735f636f6e73756d6564223a22322e313034222c22737461636b223a5b5d2c226e6f74696669636174696f6e73223a5b7b22636f6e7472616374223a22307863333336316665663335323333663964623633353462323539626539636465333462613636376335222c227374617465223a7b2274797065223a224172726179222c2276616c7565223a5b7b2274797065223a22427974654172726179222c2276616c7565223a2237343732363136653733363636353732227d2c7b2274797065223a22427974654172726179222c2276616c7565223a2236633463636263653062306138663034323966616534353838656136306532316462663332376461227d2c7b2274797065223a22427974654172726179222c2276616c7565223a2264333462656139313832333964386234303563393663303936343433666637326565623837363165227d2c7b2274797065223a22427974654172726179222c2276616c7565223a2230303461326531383135227d5d7d7d5d7d5d7d","error":null}
// ```

func (me *T) GetApplicationLogByTransactionHashInHex(args struct {
	TransactionHash h256.T
}, ret *string) error {
	if args.TransactionHash.Valid() == false {
		return stderr.ErrInvalidArgs
	}
	return me.Data.GetLastValInHex(struct {
		Target string
		Index  string
		Keys   []string
	}{
		Target: "bins.apl",
		Index:  "h256.trx",
		Keys:   []string{args.TransactionHash.Val()},
	}, ret)
}
